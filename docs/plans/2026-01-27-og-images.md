# Open Graph Images Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Create visually appealing Open Graph cards for social media sharing, with a default site-wide image and dynamic images for blog posts.

**Architecture:** Use Next.js 15's built-in `ImageResponse` API (`next/og`) for dynamic OG image generation. Static default image for most pages, dynamic generation for blog posts with title/date.

**Tech Stack:** Next.js 15, `next/og` (ImageResponse), Tailwind-like inline styles, custom fonts

---

## Task 1: Create Default OG Image Route

**Files:**
- Create: `src/app/opengraph-image.tsx`

**Step 1: Create the default OG image route handler**

```tsx
import { ImageResponse } from "next/og";

export const runtime = "edge";

export const alt = "dcbuilder.eth - Research, Development, Angel Investing";
export const size = {
	width: 1200,
	height: 630,
};
export const contentType = "image/png";

export default async function Image() {
	return new ImageResponse(
		(
			<div
				style={{
					height: "100%",
					width: "100%",
					display: "flex",
					flexDirection: "column",
					alignItems: "center",
					justifyContent: "center",
					backgroundColor: "#0a0a0a",
					backgroundImage:
						"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #0a0a0a 50%)",
				}}
			>
				{/* Profile Image Circle */}
				<div
					style={{
						width: 200,
						height: 200,
						borderRadius: "50%",
						overflow: "hidden",
						border: "4px solid #333",
						marginBottom: 32,
						display: "flex",
					}}
				>
					{/* eslint-disable-next-line @next/next/no-img-element */}
					<img
						src="https://dcbuilder.dev/images/dcbuilder.png"
						alt="dcbuilder"
						width={200}
						height={200}
						style={{ objectFit: "cover" }}
					/>
				</div>

				{/* Title */}
				<div
					style={{
						fontSize: 64,
						fontWeight: 700,
						color: "#ffffff",
						marginBottom: 16,
					}}
				>
					dcbuilder.eth
				</div>

				{/* Subtitle */}
				<div
					style={{
						fontSize: 28,
						color: "#a0a0a0",
						textAlign: "center",
						maxWidth: 800,
					}}
				>
					Research ‚Ä¢ Development ‚Ä¢ Angel Investing
				</div>

				{/* Topics */}
				<div
					style={{
						display: "flex",
						gap: 16,
						marginTop: 32,
					}}
				>
					{["Cryptography", "Distributed Systems", "AI"].map((topic) => (
						<div
							key={topic}
							style={{
								padding: "8px 20px",
								borderRadius: 20,
								backgroundColor: "#1a1a2e",
								color: "#888",
								fontSize: 18,
							}}
						>
							{topic}
						</div>
					))}
				</div>
			</div>
		),
		{
			...size,
		}
	);
}
```

**Step 2: Test by visiting `/opengraph-image`**

Run: `npm run dev`
Visit: `http://localhost:3000/opengraph-image`
Expected: PNG image renders with profile, title, and topics

**Step 3: Commit**

```bash
git add src/app/opengraph-image.tsx
git commit -m "feat: add default OG image for site"
```

---

## Task 2: Create Blog Post Dynamic OG Images

**Files:**
- Create: `src/app/blog/[slug]/opengraph-image.tsx`

**Step 1: Create dynamic OG image for blog posts**

```tsx
import { ImageResponse } from "next/og";
import { getPostBySlug } from "@/lib/blog";

export const runtime = "edge";

export const alt = "Blog post";
export const size = {
	width: 1200,
	height: 630,
};
export const contentType = "image/png";

interface Props {
	params: Promise<{ slug: string }>;
}

export default async function Image({ params }: Props) {
	const { slug } = await params;
	const post = getPostBySlug(slug);

	const title = post?.title || "Blog Post";
	const date = post?.date
		? new Date(post.date).toLocaleDateString("en-US", {
				year: "numeric",
				month: "long",
				day: "numeric",
			})
		: "";

	return new ImageResponse(
		(
			<div
				style={{
					height: "100%",
					width: "100%",
					display: "flex",
					flexDirection: "column",
					justifyContent: "space-between",
					backgroundColor: "#0a0a0a",
					backgroundImage:
						"radial-gradient(circle at 80% 20%, #1a1a2e 0%, #0a0a0a 40%)",
					padding: 60,
				}}
			>
				{/* Top: Author info */}
				<div style={{ display: "flex", alignItems: "center", gap: 16 }}>
					<div
						style={{
							width: 56,
							height: 56,
							borderRadius: "50%",
							overflow: "hidden",
							display: "flex",
						}}
					>
						{/* eslint-disable-next-line @next/next/no-img-element */}
						<img
							src="https://dcbuilder.dev/images/dcbuilder.png"
							alt="dcbuilder"
							width={56}
							height={56}
							style={{ objectFit: "cover" }}
						/>
					</div>
					<div style={{ display: "flex", flexDirection: "column" }}>
						<span style={{ color: "#ffffff", fontSize: 24, fontWeight: 600 }}>
							dcbuilder.eth
						</span>
						<span style={{ color: "#666", fontSize: 18 }}>dcbuilder.dev</span>
					</div>
				</div>

				{/* Middle: Title */}
				<div
					style={{
						display: "flex",
						flexDirection: "column",
						gap: 16,
					}}
				>
					<div
						style={{
							fontSize: title.length > 50 ? 48 : 56,
							fontWeight: 700,
							color: "#ffffff",
							lineHeight: 1.2,
							maxWidth: 1000,
						}}
					>
						{title}
					</div>
					{date && (
						<div style={{ fontSize: 24, color: "#666" }}>
							{date}
						</div>
					)}
				</div>

				{/* Bottom: Blog badge */}
				<div style={{ display: "flex" }}>
					<div
						style={{
							padding: "10px 24px",
							borderRadius: 24,
							backgroundColor: "#1a1a2e",
							color: "#888",
							fontSize: 20,
						}}
					>
						Blog
					</div>
				</div>
			</div>
		),
		{
			...size,
		}
	);
}
```

**Step 2: Test by visiting a blog post OG image**

Run: `npm run dev`
Visit: `http://localhost:3000/blog/2023-recap-and-goals-for-2024/opengraph-image`
Expected: PNG image with blog title, date, and author info

**Step 3: Commit**

```bash
git add "src/app/blog/[slug]/opengraph-image.tsx"
git commit -m "feat: add dynamic OG images for blog posts"
```

---

## Task 3: Update Layout Metadata with OG Image Reference

**Files:**
- Modify: `src/app/layout.tsx`

**Step 1: Add explicit OG image metadata to layout**

Update the metadata export to include image references:

```tsx
export const metadata: Metadata = {
	title: {
		default: "dcbuilder.eth",
		template: "%s | dcbuilder.eth",
	},
	description:
		"Research, Development, Angel Investing in cryptography, distributed systems, and AI",
	metadataBase: new URL("https://dcbuilder.dev"),
	openGraph: {
		title: "dcbuilder.eth",
		description:
			"Research, Development, Angel Investing in cryptography, distributed systems, and AI",
		url: "https://dcbuilder.dev",
		siteName: "dcbuilder",
		locale: "en_US",
		type: "website",
	},
	twitter: {
		card: "summary_large_image",
		title: "dcbuilder.eth",
		description:
			"Research, Development, Angel Investing in cryptography, distributed systems, and AI",
		creator: "@DCbuild3r",
	},
	robots: {
		index: true,
		follow: true,
	},
};
```

Note: The `opengraph-image.tsx` file automatically generates the `og:image` meta tag. Adding `metadataBase` ensures URLs are properly resolved.

**Step 2: Test metadata**

Run: `npm run dev`
View page source at `http://localhost:3000`
Expected: `<meta property="og:image" content="https://dcbuilder.dev/opengraph-image" />`

**Step 3: Commit**

```bash
git add src/app/layout.tsx
git commit -m "feat: add metadataBase and twitter creator to layout"
```

---

## Task 4: Add OG Image for Blog Index Page

**Files:**
- Create: `src/app/blog/opengraph-image.tsx`

**Step 1: Create OG image for blog listing**

```tsx
import { ImageResponse } from "next/og";

export const runtime = "edge";

export const alt = "dcbuilder.eth Blog";
export const size = {
	width: 1200,
	height: 630,
};
export const contentType = "image/png";

export default async function Image() {
	return new ImageResponse(
		(
			<div
				style={{
					height: "100%",
					width: "100%",
					display: "flex",
					flexDirection: "column",
					alignItems: "center",
					justifyContent: "center",
					backgroundColor: "#0a0a0a",
					backgroundImage:
						"radial-gradient(circle at 50% 0%, #1a1a2e 0%, #0a0a0a 50%)",
				}}
			>
				{/* Icon */}
				<div
					style={{
						fontSize: 80,
						marginBottom: 24,
					}}
				>
					üìù
				</div>

				{/* Title */}
				<div
					style={{
						fontSize: 72,
						fontWeight: 700,
						color: "#ffffff",
						marginBottom: 16,
					}}
				>
					Blog
				</div>

				{/* Subtitle */}
				<div
					style={{
						fontSize: 32,
						color: "#a0a0a0",
						textAlign: "center",
					}}
				>
					dcbuilder.eth
				</div>

				{/* Description */}
				<div
					style={{
						fontSize: 24,
						color: "#666",
						marginTop: 32,
						textAlign: "center",
						maxWidth: 700,
					}}
				>
					Thoughts on cryptography, distributed systems, and building the future
				</div>
			</div>
		),
		{
			...size,
		}
	);
}
```

**Step 2: Test**

Visit: `http://localhost:3000/blog/opengraph-image`
Expected: PNG with "Blog" title and description

**Step 3: Commit**

```bash
git add src/app/blog/opengraph-image.tsx
git commit -m "feat: add OG image for blog index page"
```

---

## Task 5: Add OG Images for Jobs and Candidates Pages

**Files:**
- Create: `src/app/jobs/opengraph-image.tsx`
- Create: `src/app/candidates/opengraph-image.tsx`

**Step 1: Create Jobs OG image**

```tsx
import { ImageResponse } from "next/og";

export const runtime = "edge";

export const alt = "Jobs - dcbuilder.eth";
export const size = {
	width: 1200,
	height: 630,
};
export const contentType = "image/png";

export default async function Image() {
	return new ImageResponse(
		(
			<div
				style={{
					height: "100%",
					width: "100%",
					display: "flex",
					flexDirection: "column",
					alignItems: "center",
					justifyContent: "center",
					backgroundColor: "#0a0a0a",
					backgroundImage:
						"radial-gradient(circle at 50% 100%, #1a2e1a 0%, #0a0a0a 50%)",
				}}
			>
				<div style={{ fontSize: 80, marginBottom: 24 }}>üíº</div>
				<div
					style={{
						fontSize: 72,
						fontWeight: 700,
						color: "#ffffff",
						marginBottom: 16,
					}}
				>
					Jobs
				</div>
				<div style={{ fontSize: 32, color: "#a0a0a0" }}>
					dcbuilder.eth
				</div>
				<div
					style={{
						fontSize: 24,
						color: "#666",
						marginTop: 32,
						textAlign: "center",
						maxWidth: 700,
					}}
				>
					Opportunities at portfolio companies and crypto network
				</div>
			</div>
		),
		{ ...size }
	);
}
```

**Step 2: Create Candidates OG image**

```tsx
import { ImageResponse } from "next/og";

export const runtime = "edge";

export const alt = "Candidates - dcbuilder.eth";
export const size = {
	width: 1200,
	height: 630,
};
export const contentType = "image/png";

export default async function Image() {
	return new ImageResponse(
		(
			<div
				style={{
					height: "100%",
					width: "100%",
					display: "flex",
					flexDirection: "column",
					alignItems: "center",
					justifyContent: "center",
					backgroundColor: "#0a0a0a",
					backgroundImage:
						"radial-gradient(circle at 50% 100%, #2e1a2e 0%, #0a0a0a 50%)",
				}}
			>
				<div style={{ fontSize: 80, marginBottom: 24 }}>üßë‚Äçüíª</div>
				<div
					style={{
						fontSize: 72,
						fontWeight: 700,
						color: "#ffffff",
						marginBottom: 16,
					}}
				>
					Candidates
				</div>
				<div style={{ fontSize: 32, color: "#a0a0a0" }}>
					dcbuilder.eth
				</div>
				<div
					style={{
						fontSize: 24,
						color: "#666",
						marginTop: 32,
						textAlign: "center",
						maxWidth: 700,
					}}
				>
					Talented builders looking for new opportunities
				</div>
			</div>
		),
		{ ...size }
	);
}
```

**Step 3: Test both images**

Visit: `http://localhost:3000/jobs/opengraph-image`
Visit: `http://localhost:3000/candidates/opengraph-image`
Expected: Distinct OG images for each page

**Step 4: Commit**

```bash
git add src/app/jobs/opengraph-image.tsx src/app/candidates/opengraph-image.tsx
git commit -m "feat: add OG images for jobs and candidates pages"
```

---

## Task 6: Add OG Image for Portfolio Page

**Files:**
- Create: `src/app/portfolio/opengraph-image.tsx`

**Step 1: Create Portfolio OG image**

```tsx
import { ImageResponse } from "next/og";

export const runtime = "edge";

export const alt = "Portfolio - dcbuilder.eth";
export const size = {
	width: 1200,
	height: 630,
};
export const contentType = "image/png";

export default async function Image() {
	return new ImageResponse(
		(
			<div
				style={{
					height: "100%",
					width: "100%",
					display: "flex",
					flexDirection: "column",
					alignItems: "center",
					justifyContent: "center",
					backgroundColor: "#0a0a0a",
					backgroundImage:
						"radial-gradient(circle at 50% 100%, #2e2e1a 0%, #0a0a0a 50%)",
				}}
			>
				<div style={{ fontSize: 80, marginBottom: 24 }}>üíé</div>
				<div
					style={{
						fontSize: 72,
						fontWeight: 700,
						color: "#ffffff",
						marginBottom: 16,
					}}
				>
					Portfolio
				</div>
				<div style={{ fontSize: 32, color: "#a0a0a0" }}>
					dcbuilder.eth
				</div>
				<div
					style={{
						fontSize: 24,
						color: "#666",
						marginTop: 32,
						textAlign: "center",
						maxWidth: 700,
					}}
				>
					Angel investments in cryptography, distributed systems, and AI
				</div>
			</div>
		),
		{ ...size }
	);
}
```

**Step 2: Test**

Visit: `http://localhost:3000/portfolio/opengraph-image`
Expected: Portfolio-specific OG image with üíé icon

**Step 3: Commit**

```bash
git add src/app/portfolio/opengraph-image.tsx
git commit -m "feat: add OG image for portfolio page"
```

---

## Verification

1. **Run dev server**: `npm run dev`
2. **Test each OG image directly**:
   - `http://localhost:3000/opengraph-image` (default)
   - `http://localhost:3000/blog/opengraph-image` (blog index)
   - `http://localhost:3000/blog/[any-slug]/opengraph-image` (blog post)
   - `http://localhost:3000/jobs/opengraph-image`
   - `http://localhost:3000/candidates/opengraph-image`
   - `http://localhost:3000/portfolio/opengraph-image`
3. **Check meta tags**: View page source, confirm `og:image` meta tags
4. **Test with social media validators**:
   - https://cards-dev.twitter.com/validator
   - https://developers.facebook.com/tools/debug/
5. **TypeScript check**: `npx tsc --noEmit`

---

## Critical Files

| File | Action |
|------|--------|
| `src/app/opengraph-image.tsx` | Create - default site OG image |
| `src/app/layout.tsx` | Modify - add metadataBase |
| `src/app/blog/opengraph-image.tsx` | Create - blog index OG image |
| `src/app/blog/[slug]/opengraph-image.tsx` | Create - dynamic blog post OG |
| `src/app/jobs/opengraph-image.tsx` | Create - jobs page OG |
| `src/app/candidates/opengraph-image.tsx` | Create - candidates page OG |
| `src/app/portfolio/opengraph-image.tsx` | Create - portfolio page OG |
